<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <link rel="icon" type="image/svg+xml" href="/favicon.svg" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Netronome - Rock Solid Timing</title>
  <link rel="stylesheet" href="/index.css" />
</head>

<body>
  <button class="theme-toggle" id="theme-toggle">ðŸŒ™ Dark</button>
  <main>
    <div class="header">
      <svg class="logo" width="100%" height="100%" viewBox="0 0 4267 4267" version="1.1"
        xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xml:space="preserve"
        xmlns:serif="http://www.serif.com/"
        style="fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2;">
        <g transform="matrix(4.84171,0,0,4.84171,-343.783,21.3232)">
          <path
            fill="currentColor"
            d="M496.436,776L104.603,776C104.603,776 498.908,91.454 500,92.406L499.793,323.733C503.643,323.545 507.517,323.45 511.413,323.45C515.566,323.45 519.693,323.558 523.793,323.771L524,92.837L918.636,776L526.804,776C521.784,776.321 516.721,776.483 511.62,776.483C506.519,776.483 501.456,776.321 496.436,776ZM499.62,323.844C384.942,330.082 293.743,425.172 293.743,541.395C293.743,661.645 391.371,759.272 511.62,759.272C631.869,759.272 729.497,661.645 729.497,541.395C729.497,425.172 638.298,330.082 523.62,323.844L523.62,514.583C534.172,519.207 541.54,529.745 541.54,542.004C541.54,558.533 528.151,571.919 511.625,571.919C495.098,571.919 481.7,558.533 481.7,542.004C481.7,529.748 489.07,519.212 499.62,514.586L499.62,323.844ZM523.62,56.862C523.62,63.489 518.246,68.863 511.619,68.863C504.994,68.863 499.62,63.489 499.62,56.862C499.62,50.236 504.994,44.863 511.619,44.863C518.246,44.863 523.62,50.236 523.62,56.862Z" />
        </g>
      </svg>

      <div class="header-text">
        <h1>Netronome</h1>
        <p class="subtitle">Rock solid JavaScript timing experiments</p>
      </div>
    </div>

    <!-- Control Panel -->
    <div class="panel">
      <div class="panel-title">Controls</div>

      <div class="controls-grid">
        <div class="control-group">
          <label for="worker-type">Worker Type</label>
          <select id="worker-type">
            <option value="audiocontext">Audio Context Worker</option>
            <option value="audioworklet">Audio Worklet</option>
            <option value="audioworklet_processor">Audio Worklet Processor</option>
            <option value="rolling">Rolling Worker</option>
            <option value="setinterval">SetInterval Worker</option>
            <option value="settimeout">SetTimeout Worker</option>
          </select>
        </div>

        <fieldset class="tempo-fieldset">
          <legend>Tempo</legend>
          <div class="tempo-controls">
            <div class="control-group">
              <label for="interval">Interval (ms)</label>
              <input id="interval" type="number" value="250" min="10" max="5000" />
            </div>

            <div class="control-group">
              <label for="bpm">BPM: <span id="bpm-value">120</span></label>
              <input id="bpm" type="range" value="120" min="20" max="300" step="1" />
            </div>
          </div>
        </fieldset>

        <div class="control-group">
          <label for="accurate-mode">
            <input id="accurate-mode" type="checkbox" />
            Accurate Mode (drift compensation)
          </label>
        </div>

        <div class="control-group">
          <label for="cpu-stress">
            <input id="cpu-stress" type="checkbox" />
            CPU Stress Test
          </label>
        </div>
      </div>

      <div class="button-group">
        <button id="start">Start</button>
        <button id="stop" disabled>Stop</button>
        <button id="reset">Reset</button>
        <button id="midi-connect">Connect MIDI</button>
      </div>
    </div>

    <!-- Performance Chart -->
    <div class="panel">
      <div class="panel-title">Performance Monitor</div>
      <div class="chart-container">
        <canvas id="performance-chart"></canvas>
      </div>
    </div>

    <!-- Statistics Panel -->
    <div class="panel">
      <div class="panel-title">Statistics</div>
      <div class="stats">
        <div class="stat-card">
          <div class="stat-label">Current Interval</div>
          <div class="stat-value"><span id="stat-intervals">0</span></div>
        </div>
        <div class="stat-card">
          <div class="stat-label">Average Drift (ms)</div>
          <div class="stat-value"><span id="stat-drift">0</span></div>
        </div>
        <div class="stat-card">
          <div class="stat-label">Average Lag (ms)</div>
          <div class="stat-value"><span id="stat-lag">0</span></div>
        </div>
        <div class="stat-card">
          <div class="stat-label">Total Ticks</div>
          <div class="stat-value"><span id="stat-ticks">0</span></div>
        </div>
      </div>
    </div>

    <!-- Data Table -->
    <div class="panel">
      <div class="panel-title">Timing Data</div>
      <div class="table-container">
        <table>
          <thead>
            <tr>
              <th>Intervals</th>
              <th>Expected (s)</th>
              <th>Elapsed (s)</th>
              <th>Time Passed (s)</th>
              <th>Drift (ms)</th>
              <th>Lag (ms)</th>
            </tr>
          </thead>
          <tbody id="feedback">
            <tr class="empty-state">
              <td colspan="6">Click Start to begin collecting timing data</td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>
  </main>

  <script type="module" src="/index.ts"></script>
</body>

</html>